---
import { Icon } from "astro-icon/components";
import { profileConfig } from "../../config";
import { url } from "../../utils/url-utils";
import ImageWrapper from "../misc/ImageWrapper.astro";

const config = profileConfig;
---

<div class="card-base p-3 transition-all duration-300 hover:shadow-lg">
  <!-- 头像区域 - 优化了过渡动画 -->
  <a 
    aria-label="前往关于页面"
    href={url('/about/')}
    class="group block relative mx-auto mt-1 lg:mx-0 lg:mt-0 mb-3 max-w-[12rem] lg:max-w-none overflow-hidden rounded-xl active:scale-95"
  >
    <!-- 半透明遮罩层 - 优化了动画效果 -->
    <div class="absolute w-full h-full z-50 flex items-center justify-center bg-black/0 transition-all duration-300 group-hover:bg-black/30 group-active:bg-black/50">
      <Icon 
        name="fa6-regular:address-card"
        class="text-white text-5xl opacity-0 scale-90 transition-all duration-300 group-hover:opacity-100 group-hover:scale-100"
      />
    </div>
    <ImageWrapper 
      src={config.avatar || ""} 
      alt="作者个人资料图片" 
      class="mx-auto lg:w-full h-full lg:mt-0 transition-transform duration-500 group-hover:scale-105"
    />
  </a>
  
  <!-- 个人信息区域 -->
  <div class="px-2">
    <div class="font-bold text-xl text-center mb-1 dark:text-neutral-50 transition-colors duration-300">
      {config.name}
    </div>
    
    <!-- 分隔线 - 添加了动画效果 -->
    <div class="h-1 w-5 bg-[var(--primary)] mx-auto rounded-full mb-2 transition-all duration-700 group-hover:w-10"></div>
    
    <div class="text-center text-neutral-400 mb-2.5 transition-colors duration-300">
      {config.bio}
    </div>
    
    <!-- 社交链接区域 -->
    <div class="flex gap-2 justify-center mb-1">
      <!-- 多个链接的情况 -->
      {config.links.length > 1 && config.links.map(item => (
        <a 
          rel="me" 
          aria-label={item.name} 
          href={item.url} 
          target="_blank" 
          class="btn-regular rounded-lg h-10 w-10 flex items-center justify-center transition-all duration-300 hover:bg-[var(--primary)] hover:text-white active:scale-90"
        >
          <Icon 
            name={item.icon} 
            class="text-[1.5rem] transition-transform duration-300 hover:scale-110"
          />
        </a>
      ))}
      
      <!-- 单个链接的情况 -->
      {config.links.length == 1 && (
        <a 
          rel="me" 
          aria-label={config.links[0].name} 
          href={config.links[0].url} 
          target="_blank"
          class="btn-regular rounded-lg h-10 gap-2 px-3 font-bold flex items-center transition-all duration-300 hover:bg-[var(--primary)] hover:text-white active:scale-95"
        >
          <Icon 
            name={config.links[0].icon} 
            class="text-[1.5rem] transition-transform duration-300 group-hover:scale-110"
          />
          {config.links[0].name}
        </a>
      )}
    </div>
  </div>
</div>

<style>
  /* 添加自定义平滑动画效果 */
  .card-base {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  
  /* 头像悬停动画优化 */
  .group:hover .ImageWrapper {
    transform: scale(1.05);
    transition: transform 0.5s cubic-bezier(0.25, 0.45, 0.45, 0.95);
  }
  
  /* 链接按钮悬停动画 */
  .btn-regular:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 
                0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }
  
  /* 分隔线动画 */
  .transition-all {
    transition-property: all;
    transition-duration: 0.3s;
  }
</style>
